<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html>

<html xmlns:epub="http://www.idpf.org/2007/ops" xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr" xmlns:xml="http://www.w3.org/XML/1998/namespace" lang="fr">
<head>
    <title>Anim_alternateur_triphase_v1d</title>
    <link href="../Styles/pw_table_style_v1r.css" rel="stylesheet" type="text/css"/>
    <link href="../Styles/anim_styles_v1e.css" rel="stylesheet" type="text/css"/>
    <script src="../Misc/anim_alternateur_v02_01.js" type="text/javascript">
        <!--empty-->
    </script>
</head>

<body>
	<h2>10.12.1 Animation : l'alternateur triphasé</h2>
	
    <!-- Inserer un canvas pour l' animation-->
    <canvas id="canvas_id" width="1127" height="375" class="canvas">
        Ho la la !!
        <br/>Malheureusement votre lecteur ne supporte pas Canvas ... l'animation ne peut pas fonctionner.
        <br/>
    </canvas>
    <br/>
    <form>
        <!-- insérer les boutons de commande-->
        <button class="button_plus_minus-space" type="button" onclick="stepRotorMoinsMoins()">--</button>
        <button class="button_plus_minus" type="button" onclick="stepRotorMoins()">-</button>
        <button class="button button-show" type="button" onclick="runMotor()">Go/Stop</button>
        <button class="button_plus_minus" type="button" onclick="stepRotorPlus()">+</button>
        <button class="button_plus_minus" type="button" onclick="stepRotorPlusPlus()">++</button>

        <!-- insérer les champs pour les textes-->

        <div class="textareaphi" id="txt_deg_id">φ = 0˚</div>
        <div class="textareaph1" id="txt_ph1_id">U=0V</div>
        <div class="textareaph2" id="txt_ph2_id" style="display: inline-block;">U=-282V</div>
        <div class="textareaph3" id="txt_ph3_id" style="display: inline-block;">U=282V</div>

		<!-- Insérer les options -->
		<label class="btncheck" id="chk_mono_id" style="visibility: hidden;">Monophasé
			<input type="checkbox" checked="" id="opt_monophase_yesno" style="cursor: pointer;"/>
		</label>
		<label class="btncheck" id="chk_lines_id" style="visibility: hidden;">Pointillés
			<input type="checkbox" checked="" id="opt_lines_yesno" style="cursor: pointer;"/>
		</label>
		<label class="btncheck" id="chk_valeurs_id" style="visibility: hidden;">Etiquettes
			<input type="checkbox" checked="" id="opt_valeurs_yesno" style="cursor: pointer;"/>
		</label>


        <!-- Et voila le script javascript-->
        <script>
			
//********************************* choix des fonctionnalités begin **************************************

            var lines_YN = true; // sho/hide dotted lines
            var tension_YN = true; // true : show sinus val
            var monophase_YN = false; // true : monophase
			var valeurs_YN = true;
			var show_btn_check = false;
			
//********************************* choix des fonctionnalités fin **************************************


			// Fonction appellée par le resize
            document.getElementsByTagName("body")[0].onresize = function() {onResizeActionAlternateur()};
			
			// Fonctions appellées par les checkbox
			const chk_lines = document.getElementById("chk_lines_id");
			const chk_mono = document.getElementById("chk_mono_id");
			const chk_val = document.getElementById("chk_valeurs_id");

			if (show_btn_check){
				chk_lines.style.visibility = "visible";
				chk_mono.style.visibility = "visible";
				chk_val.style.visibility = "visible";
			} else {
				chk_lines.style.visibility = "hidden";
				chk_mono.style.visibility = "hidden";
				chk_val.style.visibility = "hidden";
			}
	
			const opt_lines = document.getElementById("opt_lines_yesno");
			const opt_mono = document.getElementById("opt_monophase_yesno");
			const opt_val = document.getElementById("opt_valeurs_yesno");

			opt_lines.onchange = function() {optLinesYesNo(this.checked)};
			opt_lines.checked = lines_YN;
			opt_mono.onchange = function() {optMonophaseYesNo(this.checked)};
			opt_mono.checked = monophase_YN;
			opt_val.onchange = function() {optValeursYesNo(this.checked)};
			opt_val.checked = valeurs_YN;

             // récupérer les informations du canvas
            const canvas_element = document.getElementById("canvas_id");
            const ctx = canvas_element.getContext("2d");

            const txt_deg = document.getElementById("txt_deg_id");
            const txt_ph1 = document.getElementById("txt_ph1_id");
            const txt_ph2 = document.getElementById("txt_ph2_id");
            const txt_ph3 = document.getElementById("txt_ph3_id");

            var w1 = ctx.canvas.width;
            var h1 = ctx.canvas.height;

             // variable de gestion des dimensions 
            var Rr; // Rr = demi hauteur du canvas
            var R; // R = 20% de moins que le demi canvas
            var Rx; // Rx = décalage pour le graphique
            var l_width; // l_width = epaisseur des traits noirs
            var gradLen; // longuer trait fraduation
            var rf; //

             // initialisation dimensions et décalage du graphqie
            var Ymin = 0;
            var Ymax = 0;
            var Xmin = 0;
            var Xmax = 0;
            var Xlen = 0; // longueur de l'axe des x

            var s = 0; // epaisseur du stator
            var r = 0; // rayon moyen du stator
            var p = 0; // angle initial du rotor en degres
            var c = 0; // cote de l'encoche
            var w = 0; // diametre du fil

            const sleep_time = 100; // pause en ms entre deux pas en automatique
            var anim_running = false;
            var stop_asked = false;
            const p_inc = 1; // incrementation pour run auto
            var u_crete = 326; // tension de crête

            const ph1_color = "#ff4500"; // OrangeRed
            const ph2_color = "#87cefa"; // LightSkyBlue
            const ph3_color = "#32cd32"; // LimeGreen
            const label_text_color = "black";

			
			const verif_scope = "le scope est à vérifier";


             // lancer l'animation
             // translater le 0,0 du raphique au centre du stator
             // ************************************************************************
             // programme principal
             // ************************************************************************
            onResizeActionAlternateur(); // calculate all the dimentions
        </script>
</form>
</body>
</html>